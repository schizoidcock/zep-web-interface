{{ define "ModernUserDetails" }}
<div class="container max-w-[85rem] mx-auto px-4 sm:px-6 lg:px-8 py-6">
  <!-- Header Section -->
  <div class="flex items-center gap-4 mb-6">
    <a href="{{ adminPath "/users" }}" class="btn btn-ghost btn-sm" hx-get="{{ adminPath "/users" }}" hx-target="#page-content">
      <svg class="h-4 w-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
      </svg>
      Back to Users
    </a>
    <div class="h-6 w-px bg-border"></div>
    <div>
      <h1 class="text-2xl font-semibold text-foreground">User Details</h1>
      <p class="text-muted-foreground">{{ .Data.UserID }}</p>
    </div>
  </div>

  <div class="grid gap-6 lg:grid-cols-3">
    <!-- User Info Card -->
    <div class="lg:col-span-1">
      <div class="card">
        <div class="card-header">
          <div class="flex items-center gap-4">
            <!-- User Avatar -->
            <div class="h-16 w-16 rounded-full bg-primary/10 flex items-center justify-center">
              <span class="text-xl font-medium text-primary">
                {{if .Data.FirstName}}{{slice .Data.FirstName 0 1}}{{end}}{{if .Data.LastName}}{{slice .Data.LastName 0 1}}{{end}}
              </span>
            </div>
            <div>
              <h2 class="card-title">
                {{if or .Data.FirstName .Data.LastName}}{{ .Data.FirstName }} {{ .Data.LastName }}{{else}}{{ .Data.UserID }}{{end}}
              </h2>
              <p class="text-muted-foreground">{{ .Data.UserID }}</p>
            </div>
          </div>
        </div>
        <div class="card-content">
          <div class="space-y-4">
            <!-- Status -->
            <div class="flex items-center justify-between">
              <span class="text-sm font-medium text-muted-foreground">Status</span>
              {{if .Data.IsActive}}
                <span class="badge bg-green-50 text-green-700 ring-1 ring-green-600/20">
                  <div class="h-1.5 w-1.5 rounded-full bg-green-500 mr-1"></div>
                  Active
                </span>
              {{else}}
                <span class="badge bg-gray-50 text-gray-700 ring-1 ring-gray-600/20">
                  <div class="h-1.5 w-1.5 rounded-full bg-gray-400 mr-1"></div>
                  Inactive
                </span>
              {{end}}
            </div>
            
            <!-- Email -->
            {{if .Data.Email}}
            <div class="flex items-center justify-between">
              <span class="text-sm font-medium text-muted-foreground">Email</span>
              <span class="text-sm text-foreground">{{ .Data.Email }}</span>
            </div>
            {{end}}
            
            <!-- Created -->
            <div class="flex items-center justify-between">
              <span class="text-sm font-medium text-muted-foreground">Created</span>
              <span class="text-sm text-foreground">
                {{if .Data.CreatedAt}}{{ .Data.CreatedAt.Format "Jan 2, 2006" }}{{else}}Unknown{{end}}
              </span>
            </div>
            
            <!-- Last Active -->
            <div class="flex items-center justify-between">
              <span class="text-sm font-medium text-muted-foreground">Last Active</span>
              <span class="text-sm text-foreground">
                {{if .Data.UpdatedAt}}{{ .Data.UpdatedAt.Format "Jan 2, 2006" }}{{else}}Never{{end}}
              </span>
            </div>
            
            <!-- Total Sessions -->
            <div class="flex items-center justify-between">
              <span class="text-sm font-medium text-muted-foreground">Total Sessions</span>
              <span class="text-sm font-medium text-foreground">{{ .Data.SessionCount }}</span>
            </div>
          </div>
        </div>
        <div class="card-footer">
          <div class="flex gap-2 w-full">
            <button class="btn btn-outline flex-1">Edit User</button>
            <button class="btn btn-destructive">Delete</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Sessions and Activity -->
    <div class="lg:col-span-2">
      <!-- Quick Stats -->
      <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6">
        <div class="card">
          <div class="card-content p-4">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-sm text-muted-foreground">Total Sessions</p>
                <p class="text-2xl font-semibold text-foreground">{{ .Data.SessionCount }}</p>
              </div>
              <div class="h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center">
                <svg class="h-5 w-5 text-primary" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
                </svg>
              </div>
            </div>
          </div>
        </div>
        
        <div class="card">
          <div class="card-content p-4">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-sm text-muted-foreground">Total Messages</p>
                <p class="text-2xl font-semibold text-foreground">{{ .Data.MessageCount }}</p>
              </div>
              <div class="h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center">
                <svg class="h-5 w-5 text-primary" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z" />
                </svg>
              </div>
            </div>
          </div>
        </div>
        
        <div class="card">
          <div class="card-content p-4">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-sm text-muted-foreground">Avg Session Length</p>
                <p class="text-2xl font-semibold text-foreground">~</p>
              </div>
              <div class="h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center">
                <svg class="h-5 w-5 text-primary" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Recent Sessions -->
      <div class="card">
        <div class="card-header">
          <div class="flex items-center justify-between">
            <h3 class="card-title">Recent Sessions</h3>
            <a href="{{ adminPath "/users/" }}{{ .Data.UserID }}/sessions" 
               class="btn btn-outline btn-sm"
               hx-get="{{ adminPath "/users/" }}{{ .Data.UserID }}/sessions" 
               hx-target="#page-content">
              View All Sessions
            </a>
          </div>
        </div>
        <div class="card-content p-0">
          {{if .Data.Sessions}}
          <div class="divide-y divide-border">
            {{range .Data.Sessions}}
            <div class="p-4 hover:bg-muted/50 transition-colors">
              <div class="flex items-center justify-between">
                <div class="flex-1">
                  <div class="flex items-center gap-3">
                    <a href="{{ adminPath "/sessions/" }}{{ .SessionID }}" 
                       class="text-sm font-medium text-foreground hover:text-primary transition-colors"
                       hx-get="{{ adminPath "/sessions/" }}{{ .SessionID }}" 
                       hx-target="#page-content">
                      {{ .SessionID }}
                    </a>
                    {{if .IsActive}}
                      <span class="badge badge-default badge-sm">Active</span>
                    {{end}}
                  </div>
                  <div class="flex items-center gap-4 mt-1 text-sm text-muted-foreground">
                    <span>{{ .MessageCount }} messages</span>
                    <span>•</span>
                    <span>{{ .CreatedAt.Format "Jan 2, 2006 15:04" }}</span>
                    {{if .UpdatedAt}}
                    <span>•</span>
                    <span>Last: {{ .UpdatedAt.Format "Jan 2, 15:04" }}</span>
                    {{end}}
                  </div>
                </div>
                <div class="flex items-center gap-2">
                  <a href="{{ adminPath "/sessions/" }}{{ .SessionID }}" 
                     class="btn btn-ghost btn-sm"
                     hx-get="{{ adminPath "/sessions/" }}{{ .SessionID }}" 
                     hx-target="#page-content"
                     title="View session">
                    <svg class="h-4 w-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                      <path stroke-linecap="round" stroke-linejoin="round" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                    </svg>
                  </a>
                </div>
              </div>
            </div>
            {{end}}
          </div>
          {{else}}
          <div class="text-center py-8">
            <svg class="mx-auto h-8 w-8 text-muted-foreground" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1">
              <path stroke-linecap="round" stroke-linejoin="round" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
            </svg>
            <p class="mt-2 text-sm text-muted-foreground">No sessions found</p>
          </div>
          {{end}}
        </div>
      </div>
    </div>
  </div>
</div>
{{ end }}