{{ define "UserEpisodesContent" }}
{{ template "ModernUserEpisodes" . }}
{{ end }}

{{ define "ModernUserEpisodes" }}
<div>
  <!-- Header with Back Button -->
  <div class="flex items-center gap-4 mb-6">
    <a href="{{ adminPath "/users/" }}{{ .UserID }}" 
       class="inline-flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground"
       hx-get="{{ adminPath "/users/" }}{{ .UserID }}" 
       hx-target="#page-content">
      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
      </svg>
      Back to User Details
    </a>
  </div>

  <div>
    <h1 class="text-2xl font-semibold tracking-tight">User Episodes</h1>
    <p class="text-muted-foreground">View episode data from the graph for user {{ .UserID }}</p>
  </div>
  
  <div class="rounded-xl border bg-card text-card-foreground shadow mt-6">
    <div class="relative w-full overflow-auto">
      <table class="w-full caption-bottom text-sm">
        <thead class="[&_tr]:border-b">
          <tr class="border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted">
            <th class="h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]">Episode ID</th>
            <th class="h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]">Content</th>
            <th class="h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]">Source</th>
            <th class="h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]">Status</th>
            <th class="h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]">Created</th>
          </tr>
        </thead>
        <tbody class="[&_tr:last-child]:border-0">
          {{if .Data.Episodes}}
            {{range .Data.Episodes}}
            <tr class="border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted">
              <td class="p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]">
                <span class="text-sm font-mono text-muted-foreground">{{ .EpisodeID }}</span>
              </td>
              <td class="p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px] max-w-xs">
                <div class="truncate text-sm">{{ .Content }}</div>
              </td>
              <td class="p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]">
                <span class="text-sm">{{ .Source }}</span>
              </td>
              <td class="p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]">
                {{if .Processed}}
                  <span class="inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-foreground">Processed</span>
                {{else}}
                  <span class="inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-foreground">Pending</span>
                {{end}}
              </td>
              <td class="p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]">
                <span class="text-sm text-muted-foreground">
                  {{if .CreatedAt}}{{ .CreatedAt.Format "Jan 2, 2006 3:04 PM" }}{{else}}-{{end}}
                </span>
              </td>
            </tr>
            {{end}}
          {{else}}
            <tr>
              <td colspan="5" class="p-8 text-center text-muted-foreground">No episodes found for this user</td>
            </tr>
          {{end}}
        </tbody>
      </table>
    </div>
  </div>
  
</div>
{{ end }}